registerProject({"title":"smocks","summary":"Stateful HTTP mocking service built on top of [HAPI](http://hapijs.com/).  Easily add routes and different scenarios for each route including the ability to maintain state with an admin interface to control everything.\n\nWith smocks you can\n\n* create route definitions (with dynamic tokens)\n* define multiple route handlers (variants) for for any route (selectable through an admin console)\n* add input configuration components for routes and variants (accessable through an admin console)\n* use a chaninable interface to streamline route definitions\n* use route request handlers that can keep a state for true dynamic mocking capabilities\n* define global request handlers which can be selected for any route\n* use plugins which can intercept all requests to perform actions\n\nThe ```respondWith``` methods are just [HAPI route handlers](http://hapijs.com/api#route-handler) so they are very easy to use.","api":{"API":{"methods":{},"packages":{"global":{"overview":"","methods":{"route":{"profiles":["options"],"params":{"options":"object containing the following values","path":"the route path (must start with ```/```).  Ex: ```/api/customer/{id}```","label":"An optional human readable label that can be seen in the admin panel for this route","method":"optional method (GET is default)","handler":"optional default route handler (same as the first variant applied to this route)"},"summary":"Register a route handler to enable setting the method, adding variants or config properties.","dependsOn":[],"overview":"To see how variables can be used in the path, refer to the [HAPI routing guide](http://hapijs.com/tutorials/routing).\n\nReturn the associated [Route object](#project/jhudson8/smocks/snippet/package/Route).\n\n```javascript\n    var smocks = require('smocks');\n    smocks.route({\n      method: 'POST', // optional if method is 'GET'\n      path: '/api/customer/{customerId}',\n      handler: function(request, reply) {\n        // route handler but we would use replyWith if we have\n        // multiple variants\n      }\n    })\n    .replyWith(function(request, reply) {\n      // another way of definiting route handlers\n    })\n    ...\n```"},"plugin":{"profiles":["plugin"],"params":{"plugin":"the plugin object"},"summary":"Register the plugin.  See the plugin object type for details.  Return the [global object](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fpackage%2Fglobal).","dependsOn":[],"overview":""},"start":{"profiles":["options"],"params":{"options":"either object {host, port} or a HAPI server instance"},"summary":"Start a HAPI server with the defined mock configuration.","dependsOn":[],"overview":"Both the host and port are optional and will default to ```localhost``` and ```8080```.\n\nIf a HAPI server instance is provided, the routes will be bound to the HAPI server provided but the ```start``` method will not be called."}}},"Route":{"overview":"","methods":{"route":{"profiles":["options"],"params":{},"summary":"Refer to [global:route](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2Fglobal%2Froute)","dependsOn":[],"overview":""},"config":{"profiles":["attributes"],"params":{"attributes":"The configuration attributes"},"summary":"Set any configuration attributes that will be available for modification on the admin panel.","dependsOn":[],"overview":"See [config example](#project/jhudson8/smocks/section/Examples/Route%20%2F%20variant%20configuration) for details.\n\nReturn the same route object for chaining.\n\n```javascript\n    var smocks = require('smocks');\n    smocks.route(...)\n    .config({\n      myVar: {\n        label: 'Config label',\n        type: 'boolean|text|select|multiselect',\n        defaultValue: ...\n      }\n    })\n    .respondWith(...)\n```"},"variant":{"profiles":["id"],"params":{"id":"the variant id"},"summary":"Set up a new route variant with the provided id.  The id is meaningful when selecting the active variant from the admin panel.","dependsOn":[],"overview":"A variant is basically a single request handler for a defined route.  This is useful to test out different scenarios for a single route definition.\n\nReturn the [Variant object](#project/jhudson8/smocks/snippet/package/Variant).\n\n```javascript\n    var smocks = require('smocks');\n    smocks.route(...)\n    .variant('respond like this').respondWith(...)\n    .variant('respond like that').respondWith(...)\n```"},"plugin":{"profiles":["plugin"],"params":{},"summary":"Refer to [global:plugin](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2Fglobal%2Fplugin)","dependsOn":[],"overview":""},"respondWith":{"profiles":["requestHandler"],"params":{"requestHandler":"The [RequestHandler](#project/jhudson8/smocks/section/Object%20Types/RequestHandler)"},"summary":"Convienance method for creating a default variant (id of \"default\") and then calling [Variant:respondWith](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2FVariant%2FrespondWith) on the variant.","dependsOn":[],"overview":""},"respondWithFile":{"profiles":["filePath"],"params":{},"summary":"Convienance method for creating a default variant (id of \"default\") and then calling [Variant:respondWithFile](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2FVariant%2FrespondWithFile) on the variant.","dependsOn":[],"overview":""}}},"Variant":{"overview":"","methods":{"route":{"profiles":["options"],"params":{},"summary":"Refer to [global:route](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2Fglobal%2Froute)","dependsOn":[],"overview":""},"config":{"profiles":["attributes"],"params":{"attributes":"The configuration attributes"},"summary":"Set any variant-scoped configuration attributes that will be available for modification on the admin panel.","dependsOn":[],"overview":"See [config example](#project/jhudson8/smocks/section/Examples/Route%20%2F%20variant%20configuration) for details.\n\nReturn the same Variant object for chaining."},"variant":{"profiles":["id"],"params":{},"summary":"Refer to [Route:variant](#link/l%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2FRoute%2Fvariant)","dependsOn":[],"overview":""},"plugin":{"profiles":["plugin"],"params":{},"summary":"Refer to [global:plugin](#link/%23project%2Fjhudson8%2Fsmocks%2Fsnippet%2Fmethod%2Fglobal%2Fplugin)","dependsOn":[],"overview":""},"respondWith":{"profiles":["requestHandler"],"params":{"requestHandler":"The [RequestHandler](#project/jhudson8/smocks/section/Object%20Types/RequestHandler)"},"summary":"Associate a request handler with the current route/method/variant combination.","dependsOn":[],"overview":"Return the same Variant object for chaining.\n\n```javascript\n    var smocks = require('smocks');\n    smocks.route(...).respondWith(function(request, reply) {\n      var theMessage = request.params.message;\n      var aQueryStringValue = request.query.theQueryStringKey;\n      reply({message: theMessage}); // reply with a JSON payload\n      // or reply with something else\n      reply({error: {message: 'Some unknown error'}}).code(500);\n    });\n```"},"respondWithFile":{"profiles":["filePath"],"params":{"filePath":"the path to the file to serve out (any route variables can be used in the file path as well)"},"summary":"Remember that using ```./``` will refer to the top level module directory (the directory where ```node_modules``` exists regardless of the location of the file that is referring to a file location with ```./```);","dependsOn":[],"overview":"```javascript\n    var smocks = require('smocks');\n    smocks.route({path: '/customer/{id}'}).respondWithFile('./customer-{id}.json')\n    .start(...)\n```\n\nThis would cause a request to ```/customer/1``` to return the file ```./customer-1.json```\n\nReturn the same Variant object for chaining."}}}}}},"sections":[{"body":"If a route has multiple variants, the admin panel can be used to select which variant should handle the requests.  Also, the admin panel exposes any configuration input fields defined at the route or variant level.\n\nTo view the admin panel, visit [http://localhost:{port number}/_admin](#link/http%3A%2F%2Flocalhost%3A8080%2F_admin)\n\n***Note, to see route specific config options, click the route entry with your mouse.***","title":"Admin Panel","sections":[]},{"body":"Plugins can be used to perform an action on all requests or just to encapsulate a set of route handlers.  Plugins can have config values just like Routes or Variants.\n\nPlugins are just simple objects that have the following attributes\n\n* ***plugin***: (optional) if exists, will simply be called with a single parameter (the smocks object) so you can add new routes.\n* ***config***: (optional) config definitions to allow the user with different types of input fields in the admin panel.  See the next section (Config types) for more details\n* ***onRequest***: Called before the route handler (variant) executes for every request.  It is similar to the ([request, reply](http://hapijs.com/api#route-handler)) of the route handlers (Variants) but has an additional callback method that should be executed when the plugin has finished doing what it needs to do.\n\n* ***onResponse***: Called after the route handler (variant) executes for every request.  Parameters are similar to ```onRequest``` except the 2nd parameter is the return value from the [reply method (see response object)](http://hapijs.com/api#reply-interface).\n\nThe following plugin will add simulated latency (which can be controlled by the user) to all requests.\n```\n    var smocks = require('smocks');\n    smocks.plugin({\n      // define the input field for the admin panel allowing the user to adjust the delay\n        config: {\n          delay: {\n            label: 'Add delay to all responses',\n            type: 'select',\n            options: [{label: 'no delay', value: 0}, {label: '1 sec', value: 1000}, {label: '5 sec', value: 5000}],\n            defaultValue: 0\n          }\n        },\n\n        // call \"next\" after a timeout if the user requested a delay\n        onRequest: function(request, reply, next) {\n          // get the delay value from config\n          var delay = this.config('delay');\n          if (delay > 0) {\n            // if there is a delay, call next after a timeout\n            setTimeout(next, delay);\n          } else {\n            next();\n          }\n        },\n\n        onResponse: function(request, response) {\n          // I can do things to the response here\n          response.code(404);\n        }\n      })\n```","title":"Plugins","sections":[]},{"body":"Routes, variants and plugins can define config values to be exposed in the admin panel which can be accessed using ```this.config('varName')``` in route handlers (```respondWith``` functions).\n\nThere are a few different config types depending on the type of data you want to collect.\n\nHere is what it looks like to define config values.\n\n```\n    var smocks = require('smocks');\n\n    smocks.route(...)\n    // these config values are for the route\n    .config({\n      theVarName: {\n        label: 'The label shown on the admin panel',\n        type: 'boolean|text|select|multiselect',\n        defaultValue: {the default value}\n      }\n    })\n```\n\nThen, in your route handler, you would use ```this.config('theVarName')``` to access the value.\n\n_boolean value_\n\n```type``` value is ```boolean```.  The value will either be ```true``` or ```false``` or undefined if no defaultValue is provided.\n\n_text value_\n\n```type``` value is ```text```.  The value will be a string or undefined if no defaultValue is provided.\n\n_select value_\n\nThis is used to allow the user to select a single option within a specific list of defined options (a select box).\n\nAn additional ```options``` attribute is used here to describe the available options.  It is an array of objects which contain a ```label``` and ```value``` attribute.\n\n```options: [{label: 'One', value: 1}, {label: 'Two', value: 2}, {label: 'Three', value: 3}]```\n\n```type``` value is ```select```.  The value will be the ```value``` attribute of the selected option or undefined if no defaultValue is provided.\n\n_multiselect value_\n\nThis is basically the same as the ```select``` config type except that you can select multiple values rather than a single value.  It is represented as a list of check boxes rather than a select box.\n\n```type``` value is ```multiselect```.  The value will be an array of the ```value``` attributes of the selected options or undefined if no defaultValue is provided.","title":"Config types","sections":[]},{"body":"","title":"Object Types","sections":[{"body":"A plugin is a plain javascript object with the following attributes\n\n* ***onRequest***: function(request, reply, next): Standard HAPI request handler with an additional callback method to continue processing the next plugins.\n\nA small example plugin to add latency to all requests would be\n```javascript\n    ...\n    .plugin({\n      onRequest: function(request, reply, next) {\n        // wait 1 sec before continuing\n        setTimeout(next, 1000);\n      }\n    })\n```","title":"Plugin","sections":[]},{"body":"The ```respondWith``` method for variants and global plugins has access to the ```request``` and ```reply``` objects as parameters just like any [HAPI route handler](http://hapijs.com/api#route-handler).\n\nAdditionally, state, config and options values can be accessed.\n\n* ***this.state***: ```function(key, value)``` if ```value``` is undefined, return the state value of ```key```.  Otherwise set the state value of ```key``` to ```value```.\n* ***this.config***: ```function(key)``` return the config value matching the provided key\n ***this.option***: ```function(key)``` return the option value matching the provided key\n\n```javascript\n    ...\n    respondWith(function(request, reply) {\n      var oldStateValue = this.state('foo');\n      // update the state for \"foo\" to be \"bar\"\n      this.state('foo', 'bar');\n      var fooConfig = this.config('foo');\n      var fooOption = this.option('foo');\n      ...\n    })\n```","title":"RequestHandler","sections":[]}]},{"body":"","title":"Examples","sections":[{"body":"Each defined route can have multiple response handlers defined.  Only 1 can be active at any time but the active handler can be changed in the admin console to test out different scenarios.\n\n```javascript\n    var smocks = require('smocks');\n\n    smocks.route('/api/foo')\n        .method('POST')\n            .variant('default')\n                .respondWith(function(request, reply) {\n                    ...\n                })\n            .variant('something_else')\n                .respondWith(function(request, reply) {\n                    ...\n                })\n\n    .start();\n```\n\nNow, in the admin panel, you will be able to choose between the ```default``` and ```something_else``` response handlers when a POST to ```/api/foo``` is executed.\n\n(make sure to click on the route path in the admin panel to see config options)","title":"Configurable route responses","sections":[]},{"body":"It is easy to define handlers for multiple methods associated with a single route using the chaining API.  Simply call the ```method``` method any time to define a new route handler with the defined method.\n\n```javascript\n    var smocks = require('smocks');\n\n    smocks.route('/api/foo')\n        .method('GET')\n            .respondWith(function(request, reply) {\n                ...\n            })\n\n        .method('POST')\n            .respondWith(function(request, reply) {\n                ...\n            })\n\n    .start();\n```","title":"Multiple route methods","sections":[]},{"body":"The chaining API makes it easy to define a route but it is important to understand the different concepts.\n\n* ***route***: the URL path\n* ***method***: GET|POST|PUT|PATCH|DELETE\n* ***variant***: for a specific route/method combination there can be multiple variants (or request handlers) which can be selected within the admin console.  This allows you to test different scenarios that exist from calling a single endpoint.\n\nAs long as you understand that, the ```method```, ```variant``` and ```route``` methods can be called wherever it makes sense to do so.\n\n```javascript\n    var smocks = require('smocks');\n\n    smocks.route({path: '/api/foo'})\n        // the method is not necessary - GET is the default\n        .variant('default').respondWith(function(request, reply) {\n          // this is the \"default\" variant for \"/api/foo\" (GET)\n          ...\n        })\n        .variant('scenario1').respondWith(function(request, reply) {\n          // this is the \"scenario1\" variant for \"/api/foo\" (GET)\n          ...\n        })\n        .variant('scenario2').respondWith(function(request, reply) {\n          // this is the \"scenario2\" variant for \"/api/foo\" (GET)\n          ...\n        })\n\n      .method('POST')\n        //  the variant is not necessary - \"default\" is the default variant id\n        .respondWith(function(request, reply) {\n          // this is the \"default\" variant for \"/api/foo\" (POST)\n          ...\n        })\n        .variant('scenario1').respondWith(function(request, reply) {\n          // this is the \"scenario1\" variant for \"/api/foo\" (POST)\n          ...\n        })\n\n    .start();\n```","title":"Routes, methods and variants ","sections":[]},{"body":"There are 3 different ways of introducting dynamic behavior into your responses but each serve a different purpose.\n\n_config_\n\nConfig values are exposed as input fields in the admin panel so you have the ability to change the value at runtime.\n\nThese are accessed using ```this.config('varName')``` in any route handler.\n\n_options_\n\nOptions are like config but are not exposed in the admin panel.  These are most useful to expose metadata for a global pugin.  For example, you could have a plugin that examined all requests and, if the user hasn't signed in yet, respond with a 401 error.  The routes could expose an option value that indicated whether they were routes that required authentication.\n\nThese are accessed using ```this.option('varName')```.\n\n_state_\n\nState is used to, obviously, maintain state.  For example, if you expose a route that adds a new piece of data, you should store it in state.  The user can reset the state with a button on the admin panel.\n\nState values can be accessed using ```this.state('varName')```.\nState values can be set using ```this.state('varName', 'value')```.","title":"Config, options and state, oh my","sections":[]},{"body":"Different types of input fields can be defined for routes or variants including ```boolean```, ```text```, ```select```, ```multiselect```.  Through the admin panel, you can modify these config values.\n\n```javascript\n    smock.route(...)\n      .config({\n        aBooleanField: {\n          label: 'Is this a checkbox?',\n          type: 'boolean',\n          defaultValue: true\n        },\n        someTextField: {\n          label: 'A text field',\n          type: 'text',\n          defaultValue: 'Hello'\n        },\n        someSelectBox: {\n          label: 'A select box',\n          type: 'select',\n          options: [{label: 'One', value: 1}, {label: 'Two', value: 2}, {label: 'Three', value: 3}],\n          defaultValue: 2\n        },\n        someMultiSelect: {\n          label: 'A check list',\n          type: 'multiselect',\n          options: [{label: 'One', value: 1}, {label: 'Two', value: 2}, {label: 'Three', value: 3}],\n          defaultValue: [2, 3]\n        },\n      })\n\n      // these variants are here to show how the config values can be retrieved\n      .variant('default').respondWith(function(request, reply) {\n        var aBooleanField = this.config('aBooleanField'); // boolean\n        var someTextField = this.config('someTextField'); // string\n        var someSelectBox = this.config('someSelectBox'); // integer (because the values are integers)\n        var someMultiSelect = this.config('someMultiSelect'); // array of integer (because the values are integers)\n        // ...\n      })\n      .variant('scenario1').respondWith(function(request, reply) {\n        // ...\n        \n      })\n      .variant('scenario2').respondWith(function(request, reply) {\n        // ...\n      })\n```\n\nThen, within the route handler, the config values can be accessed by using ```this.config```.\n\nThe same ```config``` method can be applied at the variant level as well.\n\nThe previous config example would look like this in the admin panel\n![admin panel](http://jhudson8.github.io/smocks/images/config-types.png)","title":"Route / variant configuration","sections":[]},{"body":"This is similar to Route / variant config except that these values are not exposed within the admin console.  They are accessable within the route handlers though.\n\nThis is mostly useful for global-level plugins.\n\n```javascript\n    var smocks = require('smocks');\n\n    smocks.route(...)\n      .options({\n        theVarKey: 'the variable value'\n      })\n    .respondWith(function(request, reply) {\n      var value = this.options('theVarKey');\n      // do something with the value\n    })\n```\n\nThen, within the route handler, the options values can be accessed by using ```this.options```.","title":"Route / variant options","sections":[]},{"body":"\"Plugins\" can be provided which have the ability to intercept all income requests.  They are very similar to a variant route handler except there is a third ```next``` callback parameter which will trigger the rest of the plugins to execute.\n\nIf the plugin chooses to override the response, the ```next``` parameter should not be called.\n\nFor example, a plugin to add simulated latency to all endpoint methods\n\n```javascript\n    var smocks = require('smocks');\n\n    smocks.route(...)\n      ...\n\n    .plugin({\n      respondWith: function(request, reply, next) {\n        // wait 1 sec before allowing the response to be handled\n        setTimeout(next, 1000);\n      }\n    })\n```","title":"Global route interceptors / plugins","sections":[]}]},{"body":"Using the Admin Panel, you can save all route, variant and config settings as a \"profile\".  Profiles can either be saved locally (using localStorage) or remotely by providing the code to update in your project.","title":"Profiles","sections":[]}]});
